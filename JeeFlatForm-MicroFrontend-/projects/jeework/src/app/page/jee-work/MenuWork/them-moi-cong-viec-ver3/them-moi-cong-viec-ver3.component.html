<style>
  input {
    position: relative;
    width: 150px;
    height: 20px;
    color: white;
  }

  input:before {
    position: absolute;
    top: 10px;
    left: 3px;
    content: attr(data-date);
    display: inline-block;
    color: black;
  }

  input::-webkit-datetime-edit,
  input::-webkit-inner-spin-button,
  input::-webkit-clear-button {
    display: none;
  }

  input::-webkit-calendar-picker-indicator {
    position: absolute;
    top: 10px;
    right: 0;
    color: black;
    opacity: 1;
  }
</style>
<div class="themmoiForm">
  <div>
    <div>
      <div class="card-title" style="margin-left: -30px">
        <a style="padding-left: 30px">
          <span class="themmoiTitle" style="font-size: 20px; font-weight: bolder">Giao {{DanhMucChungService.ts_congviec}} mới</span>
        </a>
      </div>
    </div>

    <mat-dialog-content>
      <div class="card-body" [ngStyle]="{ height: getHeight() }">
        <div class="holder">

          <!-- nhiem vu -->

          <div class="row" style="padding-bottom: 10px; padding-top: 10px">
            <div class="col-md-6" style="align-self: center">
              <p style="font-weight: 600; font-size: 16px">Nhiệm vụ</p>
            </div>
            <div class="col-md-6" *ngIf="false" style="justify-content: end">
              <button style="margin: 0; float: right" type="button" mat-raised-button class="ja_button ja_btn-addnew"
                (click)="ThemDataNV()">
                <span>+ {{ "jeework.them" | translate }}</span>
              </button>
            </div>
          </div>

          <!-- don vi giao nhiem vu -->
          <div class="row" style="padding-bottom: 10px; align-items: center;">
            <div class="col-md-3">
              <span style="align-self: center; padding-right: 0; width: 8vw">
                <div>
                  {{DanhMucChungService.ts_phongban_ToUpper}}&nbsp;<span style="color: red">(*)</span>
                </div>
              </span>
            </div>
            <div class="col-md-9">
              <span style="display: flex; width: 27vw">
                <div ngbDropdown class="d-inline-block" style="width: 100%">
                  <button class="btn btn-list" mat-button style="
                      width: 100%;
                      background: none;
                      border: 1px;
                      border-style: groove;
                    " (click)="clickdvgnv.click()">
                    <div style="float: left">{{ labelDVGNV }}</div>
                    <div style="text-align: right">
                      <mat-icon style="height: 0px; width: 5px; vertical-align: sub">keyboard_arrow_down
                      </mat-icon>
                    </div>
                  </button>

                  <div [matMenuTriggerFor]="dept" #clickdvgnv></div>
                  <mat-menu #dept="matMenu">
                    <div class="page-work-detail">
                      <kt-choose-department [listPhongBan]="this.listDonViGiaoNhiemVu" name="fieldName" ngDefaultControl
                        (IsSearch)="stopPropagation($event)" (ItemSelected)="ItemSelectedDVGNV($event)"
                        [(ngModel)]="this.donvigiaogiaonhiemvu">
                      </kt-choose-department>
                    </div>
                  </mat-menu>
                </div>
              </span>
            </div>
          </div>

          <!-- nguoi giao nhiem vu -->
          <div class="row" style="padding-bottom: 10px; align-items: center;">
            <div class="col-md-3">
              <span style="align-self: center; padding-right: 0; width: 8vw">
                <div>
                  Người giao {{DanhMucChungService.ts_congviec}}&nbsp;<span style="color: red">(*)</span>
                </div>
              </span>
            </div>
            <div class="col-md-9">
              <span style="display: flex; width: 27vw">
                <div ngbDropdown class="d-inline-block" style="width: 100%">
                  <button class="btn btn-list" mat-button style="
                    width: 100%;
                    background: none;
                    border: 1px;
                    border-style: groove;
                  " (click)="clickmenu.click()">
                    <div style="float: left">{{ labelNGNV }}</div>
                    <div style="text-align: right">
                      <mat-icon style="height: 0px; width: 5px; vertical-align: sub">keyboard_arrow_down
                      </mat-icon>
                    </div>
                  </button>

                  <div [matMenuTriggerFor]="assignee" #clickmenu></div>
                  <mat-menu #assignee="matMenu">
                    <div class="page-work-detail">
                      <kt-choose-users-for-create-task name="fieldName" ngDefaultControl
                        [listUserIP]="this.listNguoiGiaoViec" [idDept]="this.idDept"
                        (IsSearch)="stopPropagation($event)" (ItemSelected)="ItemSelected($event)"
                        [(ngModel)]="this.nguoigiaonhiemvu">
                      </kt-choose-users-for-create-task>
                    </div>
                  </mat-menu>
                </div>
              </span>
            </div>
          </div>

          <!-- Người theo dõi -->
          <div class="row" style="padding-bottom: 10px; align-items: center;">
            <div class="col-md-3">
              <span style="align-self: center; padding-right: 0; width: 8vw">
                <div>
                  {{ "jeework.nguoitheodoi" | translate }}&nbsp;
                </div>
              </span>
            </div>
            <div class="col-md-9">
              <span *ngFor="let element of theodoi" style="display: inline-block"
                class="position-relative  hover-to-show">
                <i class="far fa-times-circle click view-hover text-dark bg-white" style="
            position: absolute;
            top: 0;right: 0;
            margin-left: 20px;
            border-radius: 50%;
            font-size: 10pt;
          " (click)="RemoveFollower(element)">
                </i>
                <div style="padding: 0 12px 12px 0">
                  <span matTooltip="{{ element.hoten }} - {{element.tenchucdanh}}"
                    [ngStyle]="{'background-color' : DanhMucChungService.getColorNameUser(element.hoten)}"
                    style="color: #fff; border-radius: 10px; margin-top: 12px; padding: 2px 15px; font-size: 14px;">{{element.hoten}}</span>
                </div>
              </span>
              <span class="border_icon"><i _ngcontent-aci-c286="" class="fas fa-users pd-0"
                  style="font-size: 15px; display: flex; justify-content: center"
                  (click)="clickmenuTheoDoi.click()"></i>
              </span>
              <span class="date-picker" [matMenuTriggerFor]="follow" #clickmenuTheoDoi></span>
              <mat-menu #follow="matMenu">
                <span class="page-work-detail">
                  <kt-choose-users-follow [idDept]="this.idDept" (IsSearch)="stopPropagationTheoDoi($event)"
                    (ItemFollow)="ItemSelectedTheoDoi($event)" (ItemFollowDefault)="ItemSelectedTheoDoiDefault($event)">
                  </kt-choose-users-follow>
                </span>
              </mat-menu>
            </div>
          </div>

          <!-- Xử lý data nhiều nhiệm vụ - nhiều đơn vị thực hiện -->
          <div *ngFor="let list of listDataNhiemVu" class="holder">

            <div class="row" style="padding-bottom: 10px; padding-top: 10px">
              <div class="col-md-3">
                <span style="align-self: center; width: 8vw">
                  <div>
                    Tên {{DanhMucChungService.ts_congviec}}
                    <span style="color: red">(*)</span>
                  </div>
                </span>
              </div>

              <ng-template [ngIf]="list.stt == 1">
                <div class="col-md-9">
                  <span style="width: auto;display:flex">
                    <input name="fieldName" ngDefaultControl style="margin: 0; width: 100%; color: inherit"
                      id="txttitle" type="text" class="form-input-title row" [(ngModel)]="list.title" />
                  </span>
                </div>
              </ng-template>


              <ng-template [ngIf]="list.stt != 1">
                <div class="col-md-8">
                  <span style="width: auto;display:flex">
                    <input name="fieldName" ngDefaultControl style="margin: 0; width: 105%; color: inherit"
                      id="txttitle" type="text" class="form-input-title row" [(ngModel)]="list.title" />
                  </span>
                </div>
                <div class="col-md-1 click" style="text-align: right" matTooltip="{{ 'jeework.xoa' | translate }}">
                  <svg width="36" height="40" viewBox="0 0 36 40" fill="none" xmlns="http://www.w3.org/2000/svg"
                    (click)="removeDataNhiemVu(list)">
                    <path d="M0 0H32C34.2091 0 36 1.79086 36 4V36C36 38.2091 34.2091 40 32 40H0V0Z" fill="#F64D60"
                      fill-opacity="0.15" />
                    <path
                      d="M24.8013 14.9604C23.6037 14.8414 22.4062 14.7522 21.2012 14.6852V14.6778L21.0375 13.7108C20.9259 13.0265 20.7623 12 19.0217 12H17.0729C15.3398 12 15.1762 12.9819 15.0572 13.7034L14.9009 14.6555C14.2092 14.7001 13.5174 14.7447 12.8257 14.8117L11.3083 14.9604C10.9959 14.9902 10.7727 15.2654 10.8025 15.5704C10.8322 15.8753 11.1 16.0985 11.4124 16.0687L12.9298 15.92C16.8275 15.5332 20.7549 15.6819 24.6971 16.0762C24.7195 16.0762 24.7343 16.0762 24.7567 16.0762C25.0393 16.0762 25.2848 15.8605 25.3145 15.5704C25.3368 15.2654 25.1137 14.9902 24.8013 14.9604Z"
                      fill="#FF0000" />
                    <path opacity="0.3991"
                      d="M23.4325 17.1251C23.254 16.9391 23.0085 16.835 22.7556 16.835H13.3536C13.1007 16.835 12.8478 16.9391 12.6768 17.1251C12.5057 17.311 12.409 17.5639 12.4239 17.8243L12.885 25.4559C12.9669 26.5865 13.071 27.9998 15.6669 27.9998H20.4423C23.0383 27.9998 23.1424 26.594 23.2242 25.4559L23.6854 17.8317C23.7003 17.5639 23.6036 17.311 23.4325 17.1251Z"
                      fill="#FF0000" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M16.2549 23.7151C16.2549 23.407 16.5046 23.1572 16.8128 23.1572H19.2897C19.5978 23.1572 19.8476 23.407 19.8476 23.7151C19.8476 24.0232 19.5978 24.273 19.2897 24.273H16.8128C16.5046 24.273 16.2549 24.0232 16.2549 23.7151Z"
                      fill="#FF0000" />
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M15.6372 20.7405C15.6372 20.4324 15.887 20.1826 16.1951 20.1826H19.9142C20.2223 20.1826 20.4721 20.4324 20.4721 20.7405C20.4721 21.0486 20.2223 21.2984 19.9142 21.2984H16.1951C15.887 21.2984 15.6372 21.0486 15.6372 20.7405Z"
                      fill="#FF0000" />
                  </svg>
                </div>
              </ng-template>
            </div>

            <div *ngFor="let element of list.listNhiemVu" class="holder">


              <!-- phong ban -->
              <div class="row" style="padding-bottom: 10px">
                <div class="col-md-3">
                  <span style="align-self: center; width: 8vw" *ngIf="element.sonhiemvu == 1">
                    <div>{{ "jeework.giaocho" | translate }} <span style="color: red">(*)</span></div>
                  </span>
                </div>
                <div class="col-md-5">
                  <span style="width: 20vw">
                    <div ngbDropdown class="d-inline-block">
                      <button class="btn btn-list" style="
                        background: none;
                        border-radius: 0.42rem;
                        border: 1px solid #e4e6ef;
                      " mat-button (click)="clickmenu1.click()">
                        {{ minimizeText(element.dept.title_full) }}
                        <mat-icon style="height: 0px; width: 5px; vertical-align: sub">keyboard_arrow_down
                        </mat-icon>
                      </button>
                      <div [matMenuTriggerFor]="assignee1" #clickmenu1></div>
                      <mat-menu #assignee1="matMenu">
                        <div>
                          <kt-choose-project name="fieldName" ngDefaultControl (IsSearch)="stopPropagation1($event)"
                            (ItemSelected)="ItemSelectedProject($event, element, list)" [idDept]="this.idDept">
                          </kt-choose-project>
                        </div>
                      </mat-menu>
                    </div>
                  </span>
                </div>
                <div class="col-md-4" style="padding: 0">
                  <span style="display: flex; align-items: center;justify-content: end;">
                    <ng-template [ngIf]="element.dept.id_row != undefined">
                      <div style="text-align: center;">

                        <span class="trigger" *ngIf="element.endDateFormat != ''">
                          <a>{{
                            element.endDateFormat == ""
                            ? "..."
                            : element.endDateFormat | date : 'dd/MM/yyyy'
                            }}</a>
                        </span>

                        <span class="trigger" *ngIf="element.endDateFormat == ''">
                          {{ "jeework.hanxuly" | translate }}&nbsp;<span style="color: red">(*)</span>
                        </span>

                        <input style="width: 1px; height:1px" [style.visibility]="'hidden'" matInput
                          [matDatepicker]="picker" (ngModelChange)="updateDate($event,element)"
                          [(ngModel)]="element.endDate">
                        <mat-datepicker-toggle matIconSuffix [for]="picker">
                          <i matDatepickerToggleIcon class="flaticon-calendar-3" style="font-size: 1.5rem"></i>
                        </mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                      </div>
                    </ng-template>
                    <ng-template [ngIf]="element.dept.id_row != undefined">
                      <div ngbDropdown style="display: contents !important; float: right;">
                        <ng-template [ngIf]="element.user.hoten && element.user.hoten != ''">
                          <div class="item-image">
                            <div class="user click scale-hover-02 position-relative hover-to-show"
                              style="justify-content: flex-end">
                              <i class="far fa-times-circle click view-hover text-dark bg-white" style="
                                position: absolute;
                                top: 0;
                                right: 0;
                                border-radius: 50%;
                                font-size: 10pt;
                              " (click)="RemoveAssign(element)">
                              </i>

                              <ngx-avatar *ngIf="element.user.image; else bindText" (click)="clickmenu.click()"
                                matTooltipClass="br-tooltip" matTooltip="{{ element.user.hoten }}" size="30"
                                src="{{ element.user.image }}">
                              </ngx-avatar>

                              <ng-template #bindText>
                                <ngx-avatar textSizeRatio="2.5" (click)="clickmenu.click()" matTooltipClass="br-tooltip"
                                  matTooltip="{{ element.user.hoten }}" size="30" bgColor="{{
                                  DanhMucChungService.getColorNameUser(
                                    element.user.hoten
                                  )
                                }}" [name]="
                                  this.DanhMucChungService.getName(
                                    element.user.hoten
                                  )
                                "></ngx-avatar>
                              </ng-template>
                            </div>
                          </div>
                        </ng-template>
                        <ng-template [ngIf]="
                          element.user == undefined ||
                          element.user.hoten == undefined ||
                          element.user.hoten == ''
                        ">
                          <span class="border_icon" matTooltip="{{element.IsAssignee == 0 ? 'Không được chọn' : element.requireAss == 0 ? 'Thêm người' : 'Thêm người (bắt buộc)'}}" (click)="element.IsAssignee==1?clickmenu.click():''">
                            <i [ngClass]="element.IsAssignee==1 ? 'fas fa-user-plus' : 'fa fa-user-times'" class="pd-0" style="
                              font-size: 15px;
                              display: flex;
                              justify-content: center;
                            "  [ngStyle]="{ 'color': getStypeAssingeeIcon(element) }"></i></span>
                            <div *ngIf="element.requireAss && element.IsAssignee == 1" style="color: red;">
                              (*)
                            </div>
                        </ng-template>
                        <div [matMenuTriggerFor]="assignee" #clickmenu></div>
                        <mat-menu #assignee="matMenu">
                          <div>
                            <kt-choose-users [idDept]="element.dept.id_row" (IsSearch)="stopPropagation2($event)"
                              (ItemSelected)="ItemSelected2($event, element)">
                            </kt-choose-users>
                          </div>
                        </mat-menu>
                      </div>
                    </ng-template>
                    <ng-template [ngIf]="element.dept.id_row != undefined">
                      <div style="padding-left: 5%;">
                        <span style="width: 3vw">
                          <div style="width: 30px; height: 30px">
                            <ng-template [ngIf]="element.clickup_prioritize == 0">
                              <span class="item-image" [matMenuTriggerFor]="menu" class="border_icon"
                                matTooltip="{{ 'jeework.gandouutien' | translate }}">
                                <i class="fa-flag far pd-0" style="
                                  font-size: 15px;
                                  display: flex;
                                  justify-content: center;
                                "></i>
                              </span>
                            </ng-template>
                            <ng-template [ngIf]="element.clickup_prioritize == 1">
                              <div class="item-image" [matMenuTriggerFor]="menu"
                                matTooltip="{{ 'jeework.gandouutien' | translate }}">
                                <img src="" alt="" class="ClickUp1" />
                              </div>
                            </ng-template>
                            <ng-template [ngIf]="element.clickup_prioritize == 2">
                              <div class="item-image" [matMenuTriggerFor]="menu"
                                matTooltip="{{ 'jeework.gandouutien' | translate }}">
                                <img src="" alt="" class="ClickUp2" />
                              </div>
                            </ng-template>
                            <ng-template [ngIf]="element.clickup_prioritize == 3">
                              <div class="item-image" [matMenuTriggerFor]="menu"
                                matTooltip="{{ 'jeework.gandouutien' | translate }}">
                                <img src="" alt="" class="ClickUp3" />
                              </div>
                            </ng-template>
                            <ng-template [ngIf]="element.clickup_prioritize == 4">
                              <div class="item-image" [matMenuTriggerFor]="menu"
                                matTooltip="{{ 'jeework.gandouutien' | translate }}">
                                <img src="" alt="" class="ClickUp4" />
                              </div>
                              &nbsp;
                            </ng-template>
                            <!-- </div> -->
                            <mat-menu #menu="matMenu">
                              <button mat-menu-item (click)="changeDoUuTienInTable(element, status)" style="
                                line-height: 30px !important;
                                height: 100% !important;
                              " *ngFor="let status of douutienintable">
                                <div class="row">
                                  <div style="padding-top: 10px">
                                    <img class="{{ status.icon }} size-flag-detail-18" />
                                    <span style="padding-left: 10px">{{
                                      "priority." + status.name | translate
                                      }}</span>
                                  </div>
                                </div>
                              </button>
                            </mat-menu>
                          </div>
                        </span>
                      </div>
                    </ng-template>
                    <ng-template [ngIf]="element.sonhiemvu != 1 && element.dept.id_row != undefined ">
                      <div class="click" style="padding-left: 5px;">
                        <mat-icon style="color:red" matTooltip="{{ 'jeework.xoa' | translate }}"
                          (click)="removeNhiemVu(element, list)">delete</mat-icon>
                      </div>
                    </ng-template>
                  </span>
                </div>
              </div>
            </div>

            <!-- Đơn vị phối hợp -->
            <div class="row" style="padding-bottom: 10px; padding-top: 10px">
              <div class="col-md-3">
                <span style="align-self: center; width: 8vw">
                  <div>
                    {{ "jeework.donviphoihop" | translate }}
                  </div>
                </span>
              </div>
              <div class="col-md-9">
                <div class="row" *ngFor="let dvph of list.ListDonViPhoiHop,let vi = index" style="padding-bottom: 10px">
                  <div class="col-md-12" style="padding:0; display: flex;">
                    <span>
                      <div ngbDropdown class="d-inline-block">
                        <button class="btn btn-list" style="
                          background: none;
                          border-radius: 0.42rem;
                          border: 1px solid #e4e6ef;
                        " mat-button (click)="clickdvph.click()">
                          {{ minimizeTextDVPH(dvph.donvi.title_full) }}

                          <mat-icon style="height: 0px; width: 5px; vertical-align: sub">keyboard_arrow_down
                          </mat-icon>
                        </button>
                        <div [matMenuTriggerFor]="dvphmenu" #clickdvph></div>
                        <mat-menu #dvphmenu="matMenu">
                          <div>
                            <kt-choose-project-nvph name="fieldName" ngDefaultControl [idDept]="this.idDept"
                              (IsSearch)="stopPropagation1($event)"
                              (ItemSelected)="ItemSelectedDVPH($event, dvph, list)">
                            </kt-choose-project-nvph>
                          </div>
                        </mat-menu>
                      </div>
                      &nbsp;
                    </span>
                    <ng-template [ngIf]="dvph.donvi.id_row != undefined ">
                      <div class="click" style="padding-left: 15px;" matTooltip="{{ 'jeework.xoa' | translate }}">
                        <svg width="36" height="40" viewBox="0 0 36 40" fill="none" xmlns="http://www.w3.org/2000/svg"
                          (click)="removeDVPH(dvph,list.ListDonViPhoiHop)">
                          <path d="M0 0H32C34.2091 0 36 1.79086 36 4V36C36 38.2091 34.2091 40 32 40H0V0Z" fill="#F64D60"
                            fill-opacity="0.15" />
                          <path
                            d="M24.8013 14.9604C23.6037 14.8414 22.4062 14.7522 21.2012 14.6852V14.6778L21.0375 13.7108C20.9259 13.0265 20.7623 12 19.0217 12H17.0729C15.3398 12 15.1762 12.9819 15.0572 13.7034L14.9009 14.6555C14.2092 14.7001 13.5174 14.7447 12.8257 14.8117L11.3083 14.9604C10.9959 14.9902 10.7727 15.2654 10.8025 15.5704C10.8322 15.8753 11.1 16.0985 11.4124 16.0687L12.9298 15.92C16.8275 15.5332 20.7549 15.6819 24.6971 16.0762C24.7195 16.0762 24.7343 16.0762 24.7567 16.0762C25.0393 16.0762 25.2848 15.8605 25.3145 15.5704C25.3368 15.2654 25.1137 14.9902 24.8013 14.9604Z"
                            fill="#FF0000" />
                          <path opacity="0.3991"
                            d="M23.4325 17.1251C23.254 16.9391 23.0085 16.835 22.7556 16.835H13.3536C13.1007 16.835 12.8478 16.9391 12.6768 17.1251C12.5057 17.311 12.409 17.5639 12.4239 17.8243L12.885 25.4559C12.9669 26.5865 13.071 27.9998 15.6669 27.9998H20.4423C23.0383 27.9998 23.1424 26.594 23.2242 25.4559L23.6854 17.8317C23.7003 17.5639 23.6036 17.311 23.4325 17.1251Z"
                            fill="#FF0000" />
                          <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M16.2549 23.7151C16.2549 23.407 16.5046 23.1572 16.8128 23.1572H19.2897C19.5978 23.1572 19.8476 23.407 19.8476 23.7151C19.8476 24.0232 19.5978 24.273 19.2897 24.273H16.8128C16.5046 24.273 16.2549 24.0232 16.2549 23.7151Z"
                            fill="#FF0000" />
                          <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M15.6372 20.7405C15.6372 20.4324 15.887 20.1826 16.1951 20.1826H19.9142C20.2223 20.1826 20.4721 20.4324 20.4721 20.7405C20.4721 21.0486 20.2223 21.2984 19.9142 21.2984H16.1951C15.887 21.2984 15.6372 21.0486 15.6372 20.7405Z"
                            fill="#FF0000" />
                        </svg>
                      </div>
                    </ng-template>
                  </div>
                </div>
              </div>
            </div>
            <!-- them file -->
            <div class="row" style="padding-bottom: 10px">
              <div class="col-md-3">
                <span style="align-self: center; padding-right: 0; width: 8vw">
                  <div>
                    {{ "jeework.tepvanban" | translate }}&nbsp;
                    <!-- <span style="color: red">(*)</span> -->
                  </div>
                </span>
              </div>
              <div class="col-md-9">
                <a class="action" style="cursor: pointer" (click)="selectFile()">
                  <span translate="GeneralKey.them"></span>
                  &nbsp;
                  <i style="padding-right: 10px" matTooltip="{{ 'jeework.chapnhandinhdang' | translate }}"
                    class="fas fa-info-circle"></i>
                </a>

                <input #myInput placeholder="{{ 'jeework.chonfile' | translate }}" id="imgInpdd1" type="file"
                  name="myInput" multiple style="display: none; color: inherit" (change)="UploadFileForm($event)" />
              </div>
            </div>
            <div class="row comment-box">
              <div class="col-md-12 kt-margin-bottom-10-mobile" *ngFor="let att2 of AttFile">
                <div class="attach-item show-action">
                  <!-- <ng-template #notDraft> -->
                  <div class="attach-item-icon">
                    <img src="{{ getIcon(att2.type) }}" />
                  </div>
                  <!-- </ng-template> -->

                  <div class="attach-item-name">
                    <p>{{ att2.filename }}</p>
                  </div>
                  <div class="attach-item-del d-flex">
                    <a class="url" matTooltip="{{ 'jeework.xoa' | translate }}" (click)="deleteFile(att2)">
                      <i class="fas fa-trash-alt"></i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Xử lý báo cáo định kỳ -->
        <div class="row" style="padding-bottom: 8px; padding-top: 10px">
          <div class="col-md-3" style="align-self: center">
            <p style="font-weight: 600; font-size: 16px">
              {{ "jeework.baocao" | translate }}
            </p>
          </div>
          <div class="col-md-9">
            <mat-checkbox [(ngModel)]="isBaoCaoDinhKy" (change)="changeBaoCaoDinhKy($event)" color="primary">Báo cáo
              định kỳ</mat-checkbox>
          </div>
        </div>

        <ng-container *ngIf="isBaoCaoDinhKy">
          <div class="row" style="padding-bottom: 10px; align-items: center;">
            <div class="col-md-3">
              <span style="align-self: center; padding-right: 0; width: 8vw">
                <div>
                  {{DanhMucChungService.ts_congviec_ToUpper}} lặp định kì&nbsp;<span style="color: red">(*)</span>
                </div>
              </span>
            </div>
            <div class="col-md-9">
              <span style="width: auto;display:flex">
                <input name="fieldName" ngDefaultControl style="margin: 0; width: 100%; color: inherit" id="txttitle"
                  type="text" class="form-input-title row" [(ngModel)]="title_repeat" />
                &nbsp;
                <i (click)="Openkey()" style="padding-top: 10px"
                  matTooltip="{{ 'jeework.nhapvaodexemmauthaythe' | translate }}" class="fas fa-info-circle"></i>
              </span>
            </div>
          </div>

          <!-- Chu kỳ lặp -->
          <div class="row" style="padding-bottom: 10px; align-items: center;">
            <div class="col-md-3">
              <span style="align-self: center; padding-right: 0; width: 8vw">
                <div>
                  {{ "jeework.chukylap" | translate }}&nbsp;<span style="color: red">(*)</span>
                </div>
              </span>
            </div>
            <div class="col-md-3">
              <span style="display: flex; width: 9vw">
                <div ngbDropdown class="d-inline-block" style="width: 100%">
                  <button class="btn btn-list" mat-button style="
                    width: 100%;
                    background: none;
                    border: 1px;
                    border-style: groove;
                  " (click)="clickchuky.click()">
                    <div style="float: left">{{ labelChuKy }}</div>
                    <div style="text-align: right">
                      <mat-icon style="height: 0px; width: 5px; vertical-align: sub">keyboard_arrow_down
                      </mat-icon>
                    </div>
                  </button>

                  <div [matMenuTriggerFor]="chukylap" #clickchuky></div>
                  <mat-menu #chukylap="matMenu">
                    <div class="page-work-detail">
                      <div mat-menu-item class="user-item" (click)="Change_frequency(1,'Hàng tuần')">
                        <div style="padding-left: 10px;">
                          <span>Hàng tuần</span>
                        </div>
                      </div>
                      <div mat-menu-item class="user-item" (click)="Change_frequency(2,'Hàng tháng')">
                        <div style="padding-left: 10px;">
                          <span>Hàng tháng</span>
                        </div>
                      </div>
                      <div mat-menu-item class="user-item" (click)="Change_frequency(3,'Hàng quý')">
                        <div style="padding-left: 10px;">
                          <span>Hàng quý</span>
                        </div>
                      </div>
                      <div mat-menu-item class="user-item" (click)="Change_frequency(4,'6 tháng')">
                        <div style="padding-left: 10px;">
                          <span>6 tháng</span>
                        </div>
                      </div>
                      <div mat-menu-item class="user-item" (click)="Change_frequency(5,'1 năm')">
                        <div style="padding-left: 10px;">
                          <span>1 năm</span>
                        </div>
                      </div>
                    </div>
                  </mat-menu>
                </div>
              </span>
            </div>
            <div class="col-md-3">
              <span style="align-self: center; padding-right: 0; width: 8vw; text-align: center;">
                <div>
                  {{ "jeework.thoigianlap" | translate }}&nbsp;<span style="color: red">(*)</span>
                </div>
              </span>
            </div>
            <div class="col-md-3">
              <ng-template [ngIf]="
                      TuNgayLapCK != '' || DenNgayLapCK != ''
                    ">
                <a matTooltip="Chọn thời gian" (click)="SelectdateCK()">{{
                  TuNgayLapCK == ""
                  ? "..."
                  : TuNgayLapCK | date : 'dd/MM/yyyy'
                  }}
                  -
                  {{
                  DenNgayLapCK == ""
                  ? "..."
                  : DenNgayLapCK | date : 'dd/MM/yyyy'
                  }}</a>
              </ng-template>
              <ng-template [ngIf]="
                      TuNgayLapCK == '' && DenNgayLapCK == ''
                    ">
                <img matTooltip="Chọn thời gian" (click)="SelectdateCK()" class="calender size-flag-detail" />
              </ng-template>
            </div>
          </div>

          <!-- Các ngày lặp lại -->
          <div class="row" *ngIf="+idChuKy == 1 || +idChuKy == 2" style="padding-bottom: 10px; align-items: center;">
            <div class="col-md-3">
              <span style="align-self: center; padding-right: 0; width: 8vw">
                <div>
                  {{ "jeework.cacngaylaplai" | translate }}&nbsp;<span style="color: red">(*)</span>
                </div>
              </span>
            </div>
            <div class="col-md-9" style="width: 27vw;">
              <div *ngIf="+idChuKy == 1" class="row align-items-center">
                <div style="width: 100px; padding:0;" *ngFor="let day of check_weekdays">
                  <mat-checkbox [checked]="day.Checked" (change)="Checked(day.Code, $event.checked)"
                    value="{{day.Code}}">
                    {{day.Title}}</mat-checkbox>
                </div>
              </div>
              <div *ngIf="+idChuKy == 2" class="row align-items-center">
                <mat-checkbox style="width: 60px; padding:0;" *ngFor="let day of dayofmonth" [checked]="day.Checked"
                  (change)="CheckedMonth(day.Code, $event.checked)" value="{{day.Code}}"> {{day.Code}}</mat-checkbox>
              </div>
            </div>
          </div>

          <!-- Xác định khoảng thời gian hết hạn -->
          <div class="row" style="padding-bottom: 10px; align-items: center;">
            <div class="col-md-3">
              <span style="align-self: center; padding-right: 0; width: 8vw; text-align: center;">
                {{ "jeework.xacdinhkhoangthoigianhethan" | translate }}
              </span>
            </div>
            <div class="col-md-5">
              <span style="display: flex;">
                <div ngbDropdown class="d-inline-block" style="width: 100%">
                  <button class="btn btn-list" mat-button style="
                    width: 100%;
                    background: none;
                    border: 1px;
                    border-style: groove;
                  " (click)="clickExpired_Type.click()">
                    <div style="float: left">{{ label_Expired_Type }}</div>
                    <div style="text-align: right">
                      <mat-icon style="height: 0px; width: 5px; vertical-align: sub">keyboard_arrow_down
                      </mat-icon>
                    </div>
                  </button>

                  <div [matMenuTriggerFor]="menu_Expired_Type" #clickExpired_Type></div>
                  <mat-menu #menu_Expired_Type="matMenu">
                    <div class="page-work-detail">
                      <div mat-menu-item class="user-item" (click)="Change_Expired_Type(1,'Sau ngày bắt đầu')">
                        <div style="padding-left: 10px;">
                          <span>Sau ngày bắt đầu</span>
                        </div>
                      </div>
                      <div mat-menu-item class="user-item" (click)="Change_Expired_Type(2,'Trước ngày kết thúc')">
                        <div style="padding-left: 10px;">
                          <span>Trước ngày kết thúc</span>
                        </div>
                      </div>
                      <div mat-menu-item class="user-item" (click)="Change_Expired_Type(3,'Sau ngày kết thúc')">
                        <div style="padding-left: 10px;">
                          <span>Sau ngày kết thúc</span>
                        </div>
                      </div>
                    </div>
                  </mat-menu>
                </div>
              </span>
            </div>
            <div class="col-md-2">
              <input ngDefaultControl style="margin: 0; width: 100%; color: inherit" type="text"
                class="form-input-title row" (keypress)="checkValue($event)" [(ngModel)]="Expired_Value" />
            </div>
            <div class="col-md-2">
              <span style="display: flex;">
                <div ngbDropdown class="d-inline-block" style="width: 100%">
                  <button class="btn btn-list" mat-button style="
                    width: 100%;
                    background: none;
                    border: 1px;
                    border-style: groove;
                  " (click)="clickExpired_Period.click()">
                    <div style="float: left">{{ label_Expired_Period }}</div>
                    <div style="text-align: right">
                      <mat-icon style="height: 0px; width: 5px; vertical-align: sub">keyboard_arrow_down
                      </mat-icon>
                    </div>
                  </button>

                  <div [matMenuTriggerFor]="menu_Expired_Period" #clickExpired_Period></div>
                  <mat-menu #menu_Expired_Period="matMenu">
                    <div class="page-work-detail">
                      <div mat-menu-item class="user-item" (click)="Change_Expired_Period(1,'Ngày')">
                        <div style="padding-left: 10px;">
                          <span>Ngày</span>
                        </div>
                      </div>
                      <div mat-menu-item class="user-item" (click)="Change_Expired_Period(2,'Tháng')">
                        <div style="padding-left: 10px;">
                          <span>Tháng</span>
                        </div>
                      </div>
                    </div>
                  </mat-menu>
                </div>
              </span>
            </div>
          </div>
        </ng-container>

        <!-- chi dao/ but phe -->

        <div class="row">
          <h4 class="title mt-7" style="color: #42b814; font-weight: 700">
            {{ "jeework.chidaobutphe" | translate }}
          </h4>
        </div>
        <div class="holder" style="height: 20vw">
          <div class="row" style="padding-top: 1vw">
            <div>
              <quill-editor id="quillCustomForCreate" [modules]="quillConfig" name="fieldName" ngDefaultControl
                [(ngModel)]="description_tiny" [styles]="editorStyles" [placeholder]="'Nhập nội dung ...'">
              </quill-editor>
            </div>
          </div>
        </div>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-button mat-raised-button (click)="goBack()">
        {{ "jeework.trolai" | translate }}
      </button>
      <button mat-raised-button style="background-color: #1bc5bd; color: #f2fcfb" (click)="onSubmit(true, 1)">
        {{ "jeework.luuvadong" | translate }}
      </button>
      <button mat-raised-button style="background-color: #3699ff; color: #f2fcfb" (click)="onSubmit(false, 1)">
        {{ "jeework.luuvatieptuc" | translate }}
      </button>
    </mat-dialog-actions>
  </div>
</div>
<div class="nemo-process-waiting nemo-hide-wait" id="nemo-process-waiting-id"></div>
<div class="nemo-process-waiting-loader nemo-hide-wait" id="nemo-process-waiting-loader"></div>